# Pre-commit Hook Management

## Current Hook Configuration Status

### Active Hooks (Run on every commit):
- **trailing-whitespace**: Removes trailing spaces
- **end-of-file-fixer**: Ensures files end with newline
- **check-yaml/json/toml**: Validates file formats
- **check-added-large-files**: Blocks files >1.5MB
- **black**: Python formatter (100 char lines)
- **isort**: Import sorter
- **ruff**: Linter (now catches unused imports/variables)
- **detect-secrets**: Prevents accidental secret commits
- **bandit**: Security scanner (high severity only)
- **mypy**: Type checker (relaxed mode)
- **no-print-statements**: Blocks print() in production
- **no-breakpoints**: Catches forgotten debug code

### Pre-push Hooks (Run only on git push):
- **check-duplicates**: Analyzes code duplication
- **check-architecture**: Validates architecture compliance

## How to Skip Hooks

### Skip all hooks for one commit:
```bash
git commit --no-verify -m "Emergency fix"
```

### Skip specific hooks temporarily:
```bash
SKIP=black,mypy git commit -m "WIP: Quick fix"
```

### Run hooks manually without committing:
```bash
pre-commit run --all-files  # Run all hooks
pre-commit run black        # Run specific hook
```

### Fix issues automatically:
```bash
pre-commit run --all-files --show-diff-on-failure
```

## Common Issues and Solutions

### Hook fails but code is fine:
1. Check if file is in exclude patterns
2. Add `# noqa` or `# type: ignore` comments for Python
3. Update hook configuration if too strict

### Large file needed:
1. Consider using Git LFS for binaries
2. Or temporarily: `SKIP=check-added-large-files git commit`

### Secrets detected falsely:
1. Update `.secrets.baseline`: `detect-secrets scan --baseline .secrets.baseline`
2. Or mark as false positive in the baseline file

## Recommended Workflow

1. **Normal commits**: Let hooks run automatically
2. **WIP commits**: Use `--no-verify` for work-in-progress
3. **Before PR**: Run `pre-commit run --all-files` to catch everything
4. **CI/CD**: Hooks also run in CI pipeline as safety net

## Hook Configuration File
- Location: `.pre-commit-config.yaml`
- To disable a hook: Comment it out or remove from config
- To adjust settings: Modify args in the hook definition