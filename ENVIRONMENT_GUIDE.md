Environment Guide

Purpose
- Clarifies which environment files are used by which components and which one the local CLI coding team owns.

Files and Ownership
- .env.sophia (this repo)
  - Purpose: Sophia backend (business integrations), shared infra.
  - Contents: Business API keys (Salesforce, HubSpot, Slack, etc.), DB/Redis URLs.
  - Must not include LLM model keys (OpenAI/Anthropic/Grok). Orchestrator warns if present.

- .env.mcp (this repo)
  - Purpose: MCP memory + MCP bridge settings.
  - Contents: MCP_MEMORY_HOST/PORT, MCP_BRIDGE_PORT, MCP_DOMAIN_ISOLATION, logging.
  - Generated by ./unified-start.sh if missing.

- .env (optional, this repo)
  - Purpose: Simple local testing for unified agent CLI (scripts/unified_ai_agents.py).
  - Contents: Only what you need for quick tests (e.g., OPENROUTER_API_KEY). Not required for normal startup.

- .env.artemis (external Artemis CLI repo)
  - Purpose: Designated environment for local CLI coding team and IDEs (Claude Coder, Cursor/Roo, Cline).
  - Ownership: Coding team maintains in Artemis CLI repository (not committed here).
  - Contents: LLM model provider keys (OpenAI, Anthropic, XAI/Grok, OpenRouter, etc.) and IDE-specific settings.

MCP & RAG Overview
- MCP memory (stdio) and MCP bridge (Node/TS) are started by the orchestrator.
- Optional RAG memory microservices run on HTTP:
  - sophia_memory: http://localhost:8767
  - artemis_memory: http://localhost:8768
  - Start with: ./unified-start.sh --with-rag

Quick Tips
- Use pyenv/devcontainer for Python 3.11.x where possible.
- Run preflight before boot: python3 scripts/agents_env_check.py
- For IDEs: start bridge: (cd mcp-bridge && npm install && npx tsx src/index.ts) if not using orchestrator.

SSH Agent Forwarding (Git MCP)
- Ensure an SSH agent is running and your key is loaded:
  - Start: eval "$(ssh-agent)"
  - Add key: ssh-add ~/.ssh/id_rsa (or your key path)
- Verify the socket: echo $SSH_AUTH_SOCK
- The multi-agent compose mounts SSH_AUTH_SOCK for the Git MCP container so pushes use your agent.
- Fallback: when SSH agent is not available, you can set a temporary GitHub PAT within the agent-dev shell for ad-hoc operations (avoid persisting secrets).

Personal Access Token (PAT) Fallback (Use Sparingly)
- Create a GitHub PAT with minimal scopes (e.g., repo)
- Inside the agent-dev shell, you can configure a one-off HTTPS remote:
  - git remote set-url origin https://github.com/<org>/<repo>.git
  - On push, provide PAT as password when prompted (username can be your GitHub handle)
- After use, restore SSH remote:
  - git remote set-url origin git@github.com:<org>/<repo>.git
- Do not store the PAT in files or environment; avoid adding to images or compose env.
