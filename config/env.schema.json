{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://sophia-intel-ai/config/env.schema.json",
  "title": "Sophia Intel AI Environment Schema",
  "type": "object",
  "additionalProperties": true,
  "properties": {
    "APP_ENV": {"type": "string", "enum": ["dev", "staging", "prod"], "default": "dev"},
    "SERVICE_NAME": {"type": "string", "default": "sophia-intel-ai"},
    "LOG_LEVEL": {"type": "string", "enum": ["DEBUG", "INFO", "WARNING", "ERROR"], "default": "INFO"},

    "AI_ROUTER": {"type": "string", "enum": ["portkey", "openrouter", "direct"], "default": "direct"},
    "AI_PROVIDER": {"type": "string", "enum": ["openai", "anthropic", "gemini", "mistral", "groq", "xai", "cohere", "ai21"], "default": "openai"},

    "HTTP_DEFAULT_TIMEOUT_MS": {"type": "integer", "minimum": 1000, "default": 15000},
    "HTTP_RETRY_MAX": {"type": "integer", "minimum": 0, "maximum": 10, "default": 3},
    "HTTP_BACKOFF_BASE_MS": {"type": "integer", "minimum": 10, "default": 200},

    "POSTGRES_URL": {"type": "string"},
    "REDIS_URL": {"type": "string"},
    "WEAVIATE_URL": {"type": "string"},
    "NEO4J_URL": {"type": "string"},

    "MCP_TOKEN": {"type": "string"},
    "MCP_DEV_BYPASS": {"type": "string", "enum": ["0", "1"], "default": "0"},
    "RATE_LIMIT_RPM": {"type": "integer", "minimum": 1, "default": 120},
    "READ_ONLY": {"type": "string", "enum": ["0", "1"], "default": "0"},

    "OPENAI_API_KEY": {"type": "string"},
    "ANTHROPIC_API_KEY": {"type": "string"},
    "GOOGLE_GEMINI_API_KEY": {"type": "string"},
    "MISTRAL_API_KEY": {"type": "string"},
    "GROQ_API_KEY": {"type": "string"},
    "XAI_API_KEY": {"type": "string"},
    "COHERE_API_KEY": {"type": "string"},
    "AI21_API_KEY": {"type": "string"},
    "OPENROUTER_API_KEY": {"type": "string"},
    "PORTKEY_API_KEY": {"type": "string"}
  },
  "required": ["APP_ENV", "SERVICE_NAME", "AI_ROUTER", "AI_PROVIDER"],
  "description": "Canonical environment variable schema for all services. Values for provider keys are placeholders in .env.master and resolved via Pulumi ESC in CI/CD."
}

