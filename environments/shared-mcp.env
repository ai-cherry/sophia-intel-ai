# Shared MCP Connection Settings
# This file contains shared configuration for MCP server connections

# === MCP Server Registry ===
MCP_SERVERS_ENABLED=memory,filesystem,analytics,git,unified

# === Connection Pool Configuration ===
MCP_POOL_MIN_SIZE=2
MCP_POOL_MAX_SIZE=10
MCP_POOL_ACQUIRE_TIMEOUT=5
MCP_POOL_IDLE_TIMEOUT=300
MCP_POOL_CONNECTION_LIFETIME=3600

# === Retry Configuration ===
MCP_RETRY_MAX_ATTEMPTS=3
MCP_RETRY_BASE_DELAY=1
MCP_RETRY_MAX_DELAY=10
MCP_RETRY_EXPONENTIAL_BASE=2
MCP_RETRY_JITTER=true

# === Circuit Breaker Settings ===
MCP_CIRCUIT_BREAKER_ENABLED=true
MCP_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
MCP_CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2
MCP_CIRCUIT_BREAKER_TIMEOUT=30
MCP_CIRCUIT_BREAKER_HALF_OPEN_REQUESTS=3

# === Health Check Configuration ===
MCP_HEALTH_CHECK_ENABLED=true
MCP_HEALTH_CHECK_INTERVAL=30
MCP_HEALTH_CHECK_TIMEOUT=5
MCP_HEALTH_CHECK_UNHEALTHY_THRESHOLD=3
MCP_HEALTH_CHECK_HEALTHY_THRESHOLD=2

# === Protocol Settings ===
# Support both HTTP and stdio protocols
MCP_PROTOCOLS_SUPPORTED=http,stdio
MCP_DEFAULT_PROTOCOL=http
MCP_STDIO_FALLBACK_ENABLED=true

# === HTTP Protocol Settings ===
MCP_HTTP_TIMEOUT=30
MCP_HTTP_KEEPALIVE=true
MCP_HTTP_MAX_REDIRECTS=3
MCP_HTTP_COMPRESSION=gzip
MCP_HTTP_USER_AGENT=sophia-mcp-client/1.0

# === Stdio Protocol Settings ===
MCP_STDIO_BUFFER_SIZE=65536
MCP_STDIO_ENCODING=utf-8
MCP_STDIO_LINE_DELIMITER=\n
MCP_STDIO_MESSAGE_DELIMITER=\0

# === Message Queue Settings ===
MCP_QUEUE_MAX_SIZE=1000
MCP_QUEUE_OVERFLOW_STRATEGY=drop_oldest
MCP_QUEUE_BATCH_SIZE=10
MCP_QUEUE_FLUSH_INTERVAL=100

# === Monitoring & Logging ===
MCP_METRICS_ENABLED=true
MCP_METRICS_EXPORT_INTERVAL=60
MCP_TRACING_ENABLED=true
MCP_TRACING_SAMPLE_RATE=0.1
MCP_LOG_REQUESTS=true
MCP_LOG_RESPONSES=false
MCP_LOG_ERRORS=true

# === Security Configuration ===
MCP_TLS_ENABLED=false
MCP_TLS_VERIFY=true
MCP_TLS_CA_CERT_PATH=/etc/ssl/certs/ca-certificates.crt
MCP_AUTH_ENABLED=false
MCP_AUTH_TYPE=bearer
MCP_AUTH_TOKEN_ENV=MCP_AUTH_TOKEN

# === Service Discovery ===
MCP_DISCOVERY_ENABLED=false
MCP_DISCOVERY_METHOD=static
MCP_DISCOVERY_REFRESH_INTERVAL=300
MCP_DISCOVERY_CACHE_TTL=600

# === Rate Limiting ===
MCP_RATE_LIMIT_ENABLED=true
MCP_RATE_LIMIT_REQUESTS_PER_SECOND=100
MCP_RATE_LIMIT_BURST_SIZE=200
MCP_RATE_LIMIT_PER_SERVER=true

# === Caching Configuration ===
MCP_CACHE_ENABLED=true
MCP_CACHE_TTL=300
MCP_CACHE_MAX_SIZE=1000
MCP_CACHE_EVICTION_POLICY=lru

# === Server-Specific Overrides ===
# Memory Server
MCP_MEMORY_CACHE_TTL=600
MCP_MEMORY_MAX_CONNECTIONS=20

# Filesystem Server
MCP_FILESYSTEM_CACHE_TTL=60
MCP_FILESYSTEM_MAX_FILE_SIZE=10485760

# Analytics Server
MCP_ANALYTICS_BATCH_SIZE=100
MCP_ANALYTICS_FLUSH_INTERVAL=5000

# Git Server
MCP_GIT_CACHE_TTL=300
MCP_GIT_MAX_DEPTH=100

# Unified Server
MCP_UNIFIED_TIMEOUT=60
MCP_UNIFIED_MAX_PARALLEL=5