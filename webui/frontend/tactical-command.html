<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOPHIA SPECIAL OPERATIONS - Mission Control</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Barlow+Condensed:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-green: #00ff88;
            --secondary-blue: #0088ff;
            --warning-amber: #ffaa00;
            --danger-red: #ff4444;
            --success-green: #44ff44;
            
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-panel: rgba(255,255,255,0.05);
            --bg-panel-active: rgba(0,255,136,0.1);
            --border: rgba(0,255,136,0.3);
            --border-active: rgba(0,255,136,0.8);
            
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --text-tactical: var(--primary-green);
            
            --font-mono: 'JetBrains Mono', monospace;
            --font-tactical: 'Barlow Condensed', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: var(--font-mono);
            font-size: 13px;
            line-height: 1.4;
            overflow: hidden;
        }

        /* Tactical Grid Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(0,255,136,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,255,136,0.03) 1px, transparent 1px);
            background-size: 20px 20px;
            pointer-events: none;
            z-index: -1;
        }

        .command-header {
            background: var(--bg-secondary);
            border-bottom: 2px solid var(--border);
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .command-title {
            font-family: var(--font-tactical);
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-green);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .status-bar {
            display: flex;
            gap: 20px;
            font-size: 11px;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-operational { background: var(--success-green); }
        .status-engaged { background: var(--warning-amber); }
        .status-offline { background: var(--danger-red); }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .war-room {
            display: grid;
            grid-template-columns: 2fr 1.5fr 1.5fr 2fr;
            grid-template-rows: 1fr 1fr;
            height: calc(100vh - 120px);
            gap: 2px;
            background: var(--border);
            padding: 2px;
        }

        .panel {
            background: var(--bg-panel);
            border: 1px solid var(--border);
            padding: 16px;
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(10px);
        }

        .panel-header {
            font-family: var(--font-tactical);
            font-size: 12px;
            font-weight: 600;
            color: var(--primary-green);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
            padding-bottom: 6px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-icon {
            font-size: 14px;
        }

        /* Mission Briefing Panel */
        .mission-briefing {
            grid-row: span 2;
        }

        .unit-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 16px;
        }

        .unit-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .unit-card:hover, .unit-card.selected {
            border-color: var(--border-active);
            background: var(--bg-panel-active);
        }

        .unit-rank {
            font-family: var(--font-tactical);
            font-size: 10px;
            color: var(--warning-amber);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .unit-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 4px 0;
        }

        .unit-specialty {
            font-size: 10px;
            color: var(--text-secondary);
        }

        .mission-controls {
            margin-top: 16px;
        }

        .input-group {
            margin-bottom: 12px;
        }

        .input-label {
            display: block;
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tactical-input, .tactical-select, .tactical-textarea {
            width: 100%;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 8px 12px;
            font-family: var(--font-mono);
            font-size: 12px;
            border-radius: 2px;
        }

        .tactical-textarea {
            height: 80px;
            resize: vertical;
        }

        .tactical-input:focus, .tactical-select:focus, .tactical-textarea:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 2px rgba(0,255,136,0.2);
        }

        .tactical-button {
            background: linear-gradient(135deg, var(--primary-green), #00cc66);
            border: none;
            color: var(--bg-primary);
            padding: 10px 20px;
            font-family: var(--font-tactical);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            border-radius: 2px;
            transition: all 0.3s ease;
            width: 100%;
        }

        .tactical-button:hover {
            background: linear-gradient(135deg, #00cc66, var(--primary-green));
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,255,136,0.3);
        }

        .tactical-button.secondary {
            background: linear-gradient(135deg, var(--secondary-blue), #0066cc);
        }

        .tactical-button.danger {
            background: linear-gradient(135deg, var(--danger-red), #cc3333);
        }

        /* Intel Feed Panel */
        .intel-feed {
            max-height: 100%;
        }

        .intel-item {
            background: var(--bg-secondary);
            border-left: 3px solid var(--primary-green);
            padding: 8px 12px;
            margin-bottom: 8px;
            font-size: 11px;
        }

        .intel-timestamp {
            color: var(--text-secondary);
            font-size: 9px;
        }

        .intel-message {
            color: var(--text-primary);
            margin-top: 2px;
        }

        /* Operation Status Panel */
        .operation-status .status-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .status-metric {
            text-align: center;
            padding: 12px;
            background: var(--bg-secondary);
            border-radius: 4px;
        }

        .metric-value {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-green);
        }

        .metric-label {
            font-size: 10px;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-top: 4px;
        }

        /* Code Stream Panel */
        .code-stream {
            grid-row: span 2;
        }

        .code-output {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            height: calc(100% - 40px);
            padding: 12px;
            font-family: var(--font-mono);
            font-size: 11px;
            overflow-y: auto;
            white-space: pre-wrap;
            color: var(--text-primary);
        }

        .code-line {
            border-left: 3px solid transparent;
            padding-left: 8px;
            margin-bottom: 2px;
        }

        .code-line.new {
            border-left-color: var(--success-green);
            background: rgba(68,255,68,0.1);
        }

        .code-line.error {
            border-left-color: var(--danger-red);
            background: rgba(255,68,68,0.1);
        }

        /* Communications Panel */
        .communications .message-input {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .message-history {
            height: calc(100% - 80px);
            overflow-y: auto;
            padding: 8px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
        }

        .message-item {
            margin-bottom: 8px;
            padding: 6px 8px;
            border-radius: 4px;
        }

        .message-user {
            background: rgba(0,136,255,0.2);
            align-self: flex-end;
        }

        .message-agent {
            background: rgba(0,255,136,0.2);
        }

        /* Repository Explorer */
        .repo-tree {
            height: calc(100% - 40px);
            overflow-y: auto;
        }

        .tree-item {
            padding: 4px 8px;
            cursor: pointer;
            user-select: none;
        }

        .tree-item:hover {
            background: var(--bg-panel-active);
        }

        .tree-folder {
            color: var(--warning-amber);
        }

        .tree-file {
            color: var(--text-secondary);
        }

        /* Diff Viewer */
        .diff-container {
            height: calc(100% - 40px);
            overflow-y: auto;
            font-family: var(--font-mono);
            font-size: 11px;
        }

        .diff-line {
            padding: 2px 8px;
            white-space: pre;
        }

        .diff-add {
            background: rgba(68,255,68,0.2);
            border-left: 3px solid var(--success-green);
        }

        .diff-remove {
            background: rgba(255,68,68,0.2);
            border-left: 3px solid var(--danger-red);
        }

        /* Tactical Bar */
        .tactical-bar {
            background: var(--bg-secondary);
            border-top: 2px solid var(--border);
            padding: 8px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .tactical-nav {
            display: flex;
            gap: 16px;
        }

        .nav-button {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-family: var(--font-tactical);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            padding: 6px 12px;
            transition: color 0.3s ease;
        }

        .nav-button:hover, .nav-button.active {
            color: var(--primary-green);
        }

        .connection-status {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* Scrollbars */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-green);
        }
    </style>
</head>
<body>
    <header class="command-header">
        <div class="command-title">🎖️ SOPHIA SPECIAL OPERATIONS - MISSION CONTROL</div>
        <div class="status-bar">
            <div class="status-indicator">
                <div class="status-dot status-operational"></div>
                <span>MCP SERVICES: OPERATIONAL</span>
            </div>
            <div class="status-indicator">
                <div class="status-dot status-engaged"></div>
                <span>PROVIDERS: 5 ACTIVE</span>
            </div>
            <div class="status-indicator">
                <div class="status-dot status-operational"></div>
                <span>MEMORY: READY</span>
            </div>
        </div>
    </header>

    <main class="war-room">
        <!-- Mission Briefing Panel -->
        <section class="panel mission-briefing">
            <div class="panel-header">
                <span>🎯 MISSION BRIEFING</span>
                <span class="panel-icon">⚡</span>
            </div>
            
            <div class="unit-selector">
                <div class="unit-card selected" data-unit="atlas">
                    <div class="unit-rank">🎖️ Major</div>
                    <div class="unit-name">ATLAS</div>
                    <div class="unit-specialty">Chief Architect</div>
                </div>
                <div class="unit-card" data-unit="rogue">
                    <div class="unit-rank">🎖️ Captain</div>
                    <div class="unit-name">ROGUE</div>
                    <div class="unit-specialty">Sr. Implementer</div>
                </div>
                <div class="unit-card" data-unit="fox">
                    <div class="unit-rank">🎖️ Lieutenant</div>
                    <div class="unit-name">FOX</div>
                    <div class="unit-specialty">Code Reviewer</div>
                </div>
                <div class="unit-card" data-unit="wolf">
                    <div class="unit-rank">🎖️ Sergeant</div>
                    <div class="unit-name">WOLF</div>
                    <div class="unit-specialty">Refactor Spec</div>
                </div>
                <div class="unit-card" data-unit="ghost">
                    <div class="unit-rank">🎖️ Private</div>
                    <div class="unit-name">GHOST</div>
                    <div class="unit-specialty">Test Smith</div>
                </div>
                <div class="unit-card" data-unit="recon">
                    <div class="unit-rank">🎖️ Recon</div>
                    <div class="unit-name">EYE</div>
                    <div class="unit-specialty">Vision Analyst</div>
                </div>
            </div>

            <div class="mission-controls">
                <div class="input-group">
                    <label class="input-label">Mission Type</label>
                    <select class="tactical-select" id="missionType">
                        <option value="planning">ALPHA - Planning & Architecture</option>
                        <option value="generation">BRAVO - Code Implementation</option>
                        <option value="validation">CHARLIE - Code Review & QA</option>
                        <option value="refactor">DELTA - Refactor & Optimize</option>
                        <option value="testing">ECHO - Testing & Validation</option>
                        <option value="vision">FOXTROT - Documentation & Visuals</option>
                    </select>
                </div>

                <div class="input-group">
                    <label class="input-label">Target Repository</label>
                    <select class="tactical-select" id="repoScope">
                        <option value="sophia">Sophia Intelligence</option>
                        <option value="sophia">Sophia Operations</option>
                    </select>
                </div>

                <div class="input-group">
                    <label class="input-label">Mission Briefing</label>
                    <textarea class="tactical-textarea" id="missionBrief" placeholder="Enter detailed mission objectives..."></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">Provider Strategy</label>
                    <select class="tactical-select" id="providerStrategy">
                        <option value="optimal">Auto-Deploy Optimal</option>
                        <option value="budget">Budget-Conscious</option>
                        <option value="speed">Speed-First</option>
                        <option value="quality">Quality-Maximum</option>
                    </select>
                </div>

                <button class="tactical-button" id="deployMission">🚀 DEPLOY MISSION</button>
            </div>
        </section>

        <!-- Intel Feed Panel -->
        <section class="panel intel-feed">
            <div class="panel-header">
                <span>📡 INTEL FEED</span>
                <span class="panel-icon">📊</span>
            </div>
            
            <div id="intelFeed">
                <div class="intel-item">
                    <div class="intel-timestamp">02:05:42 UTC</div>
                    <div class="intel-message">MCP Memory Server: Query executed - 3 results</div>
                </div>
                <div class="intel-item">
                    <div class="intel-timestamp">02:05:38 UTC</div>
                    <div class="intel-message">Provider Router: OpenRouter fallback activated</div>
                </div>
                <div class="intel-item">
                    <div class="intel-timestamp">02:05:35 UTC</div>
                    <div class="intel-message">Git Server: Protected branch policy enforced</div>
                </div>
                <div class="intel-item">
                    <div class="intel-timestamp">02:05:30 UTC</div>
                    <div class="intel-message">Weaviate Indexer: 127 documents processed</div>
                </div>
            </div>
        </section>

        <!-- Operation Status Panel -->
        <section class="panel operation-status">
            <div class="panel-header">
                <span>⚙️ OPERATION STATUS</span>
                <span class="panel-icon">📈</span>
            </div>
            
            <div class="status-grid">
                <div class="status-metric">
                    <div class="metric-value">5</div>
                    <div class="metric-label">Active Units</div>
                </div>
                <div class="status-metric">
                    <div class="metric-value">247ms</div>
                    <div class="metric-label">Avg Response</div>
                </div>
                <div class="status-metric">
                    <div class="metric-value">$2.47</div>
                    <div class="metric-label">Budget Used</div>
                </div>
                <div class="status-metric">
                    <div class="metric-value">98.2%</div>
                    <div class="metric-label">Success Rate</div>
                </div>
            </div>
        </section>

        <!-- Code Stream Panel -->
        <section class="panel code-stream">
            <div class="panel-header">
                <span>💻 CODE STREAM</span>
                <span class="panel-icon">⚡</span>
            </div>
            
            <div class="code-output" id="codeOutput">
                <div class="code-line">// MAJOR ATLAS - TACTICAL ANALYSIS INITIATED</div>
                <div class="code-line">// Analyzing repository structure...</div>
                <div class="code-line new">+ function analyzeCodeComplexity(filePath: string) {</div>
                <div class="code-line new">+   const ast = parseFile(filePath);</div>
                <div class="code-line new">+   return calculateCyclomaticComplexity(ast);</div>
                <div class="code-line new">+ }</div>
                <div class="code-line">//</div>
                <div class="code-line">// CAPTAIN ROGUE - IMPLEMENTATION PHASE</div>
                <div class="code-line">// Deploying enhanced provider router...</div>
                <div class="code-line new">+ class EnhancedProviderRouter {</div>
                <div class="code-line new">+   private circuitBreakers: Map<string, CircuitBreaker>;</div>
                <div class="code-line new">+   private budgets: Map<string, ProviderBudget>;</div>
                <div class="code-line new">+ </div>
                <div class="code-line new">+   async route(taskType: string): Promise<Route> {</div>
                <div class="code-line new">+     // Implement intelligent routing logic</div>
                <div class="code-line new">+     return this.selectOptimalProvider(taskType);</div>
                <div class="code-line new">+   }</div>
                <div class="code-line new">+ }</div>
            </div>
        </section>

        <!-- Communications Panel -->
        <section class="panel communications">
            <div class="panel-header">
                <span>📞 COMMUNICATIONS</span>
                <span class="panel-icon">💬</span>
            </div>
            
            <div class="message-input">
                <input type="text" class="tactical-input" id="messageInput" placeholder="Send tactical message...">
                <button class="tactical-button secondary" id="sendMessage">SEND</button>
            </div>
            
            <div class="message-history" id="messageHistory">
                <div class="message-item message-agent">
                    <strong>MAJOR ATLAS:</strong> Mission parameters confirmed. Initiating tactical analysis.
                </div>
                <div class="message-item message-user">
                    <strong>COMMAND:</strong> Roger, Atlas. Proceed with code architecture review.
                </div>
                <div class="message-item message-agent">
                    <strong>CAPTAIN ROGUE:</strong> Standing by for implementation orders.
                </div>
            </div>
        </section>

        <!-- Repository Explorer -->
        <section class="panel repo-explorer">
            <div class="panel-header">
                <span>📁 REPO EXPLORER</span>
                <span class="panel-icon">🗂️</span>
            </div>
            
            <div class="repo-tree" id="repoTree">
                <div class="tree-item tree-folder">📁 app/</div>
                <div class="tree-item tree-folder">📁 llm/</div>
                <div class="tree-item tree-file">📄 provider_router.py</div>
                <div class="tree-item tree-file">📄 multi_transport.py</div>
                <div class="tree-item tree-folder">📁 mcp/</div>
                <div class="tree-item tree-folder">📁 git/</div>
                <div class="tree-item tree-file">📄 server.py</div>
                <div class="tree-item tree-folder">📁 memory/</div>
                <div class="tree-item tree-file">📄 server.py</div>
                <div class="tree-item tree-folder">📁 webui/</div>
                <div class="tree-item tree-folder">📁 backend/</div>
                <div class="tree-item tree-file">📄 main.py</div>
                <div class="tree-item tree-folder">📁 config/</div>
                <div class="tree-item tree-folder">📁 agents/</div>
                <div class="tree-item tree-file">📄 routing.yml</div>
            </div>
        </section>

        <!-- Diff Viewer -->
        <section class="panel diff-viewer">
            <div class="panel-header">
                <span>🔍 DIFF VIEWER</span>
                <span class="panel-icon">📝</span>
            </div>
            
            <div class="diff-container" id="diffViewer">
                <div class="diff-line">@@ -23,7 +23,12 @@ class EnhancedProviderRouter:</div>
                <div class="diff-line">     def __init__(self, config_path: str | None = None) -> None:</div>
                <div class="diff-line">         self.cfg = self._load_cfg(config_path)</div>
                <div class="diff-line">         self.llm = MultiTransportLLM()</div>
                <div class="diff-line diff-add">+        self.circuit_breakers = {}</div>
                <div class="diff-line diff-add">+        self.budgets = {}</div>
                <div class="diff-line diff-add">+        self.metrics = PrometheusMetrics()</div>
                <div class="diff-line"> </div>
                <div class="diff-line">     def _route_for(self, task_type: str) -> Route:</div>
                <div class="diff-line diff-remove">-        # Simple routing logic</div>
                <div class="diff-line diff-add">+        # Enhanced routing with circuit breaker</div>
                <div class="diff-line diff-add">+        if self.circuit_breakers.get(task_type, False):</div>
                <div class="diff-line diff-add">+            return self._get_fallback_route(task_type)</div>
            </div>
        </section>

        <!-- Provider Analytics -->
        <section class="panel provider-analytics">
            <div class="panel-header">
                <span>📊 PROVIDER ANALYTICS</span>
                <span class="panel-icon">💰</span>
            </div>
            
            <div class="analytics-content">
                <div class="status-metric">
                    <div class="metric-value">OpenRouter</div>
                    <div class="metric-label">Primary Provider</div>
                </div>
                <div class="status-metric">
                    <div class="metric-value">156ms</div>
                    <div class="metric-label">Avg Latency</div>
                </div>
                <div class="status-metric">
                    <div class="metric-value">$0.0034</div>
                    <div class="metric-label">Cost per 1K</div>
                </div>
                <div class="status-metric">
                    <div class="metric-value">2.3s</div>
                    <div class="metric-label">TTFB</div>
                </div>
            </div>
        </section>
    </main>

    <footer class="tactical-bar">
        <nav class="tactical-nav">
            <button class="nav-button active">📍 Mission History</button>
            <button class="nav-button">⚡ Live Feed</button>
            <button class="nav-button">🛡️ Security</button>
            <button class="nav-button">📊 Analytics</button>
        </nav>
        
        <div class="connection-status">
            WebSocket: <span style="color: var(--success-green);">CONNECTED</span> | 
            Session: <span style="color: var(--primary-green);">ALPHA-7749</span>
        </div>
    </footer>

    <script>
        // Basic interactive functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Unit selection
            document.querySelectorAll('.unit-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.unit-card').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });

            // Deploy mission button
            document.getElementById('deployMission').addEventListener('click', function() {
                const missionType = document.getElementById('missionType').value;
                const selectedUnit = document.querySelector('.unit-card.selected').dataset.unit;
                
                addIntelFeed(`Mission ${missionType.toUpperCase()} deployed with unit ${selectedUnit.toUpperCase()}`);
                this.textContent = '⏳ MISSION ACTIVE';
                this.style.background = 'linear-gradient(135deg, var(--warning-amber), #cc8800)';
                
                setTimeout(() => {
                    this.textContent = '✅ MISSION COMPLETE';
                    this.style.background = 'linear-gradient(135deg, var(--success-green), #33cc33)';
                    
                    setTimeout(() => {
                        this.textContent = '🚀 DEPLOY MISSION';
                        this.style.background = 'linear-gradient(135deg, var(--primary-green), #00cc66)';
                    }, 2000);
                }, 3000);
            });

            // Send message functionality
            document.getElementById('sendMessage').addEventListener('click', function() {
                const messageInput = document.getElementById('messageInput');
                const message = messageInput.value.trim();
                
                if (message) {
                    addMessage(`COMMAND: ${message}`, 'user');
                    messageInput.value = '';
                    
                    // Simulate agent response
                    setTimeout(() => {
                        const responses = [
                            'MAJOR ATLAS: Roger, analyzing tactical situation.',
                            'CAPTAIN ROGUE: Copy that, implementing solution.',
                            'LIEUTENANT FOX: Acknowledged, running quality checks.',
                            'SERGEANT WOLF: Understood, optimizing approach.',
                            'PRIVATE GHOST: Confirmed, initiating test protocols.',
                            'RECON EYE: Visual analysis in progress.'
                        ];
                        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                        addMessage(randomResponse, 'agent');
                    }, 1500);
                }
            });

            // Enter key for message input
            document.getElementById('messageInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('sendMessage').click();
                }
            });

            // Repository tree interaction
            document.querySelectorAll('.tree-item').forEach(item => {
                item.addEventListener('click', function() {
                    if (this.classList.contains('tree-folder')) {
                        this.style.color = 'var(--primary-green)';
                        addIntelFeed(`Repository: Exploring ${this.textContent}`);
                    } else {
                        this.style.color = 'var(--secondary-blue)';
                        addIntelFeed(`File selected: ${this.textContent}`);
                    }
                });
            });

            // Navigation buttons
            document.querySelectorAll('.nav-button').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.nav-button').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    addIntelFeed(`Navigation: Switched to ${this.textContent} view`);
                });
            });

            // Simulate live updates
            setInterval(() => {
                updateMetrics();
                simulateCodeStream();
            }, 5000);

            // Initial intel feed population
            setTimeout(() => {
                addIntelFeed('System initialization complete');
                addIntelFeed('All units standing by for deployment');
            }, 1000);
        });

        // Helper functions
        function addIntelFeed(message) {
            const intelFeed = document.getElementById('intelFeed');
            const timestamp = new Date().toLocaleTimeString('en-US', { 
                hour12: false, 
                timeZone: 'UTC' 
            }) + ' UTC';
            
            const intelItem = document.createElement('div');
            intelItem.className = 'intel-item';
            intelItem.innerHTML = `
                <div class="intel-timestamp">${timestamp}</div>
                <div class="intel-message">${message}</div>
            `;
            
            intelFeed.insertBefore(intelItem, intelFeed.firstChild);
            
            // Keep only last 10 items
            while (intelFeed.children.length > 10) {
                intelFeed.removeChild(intelFeed.lastChild);
            }
        }

        function addMessage(message, type) {
            const messageHistory = document.getElementById('messageHistory');
            const messageItem = document.createElement('div');
            messageItem.className = `message-item message-${type}`;
            messageItem.innerHTML = `<strong>${message}</strong>`;
            
            messageHistory.appendChild(messageItem);
            messageHistory.scrollTop = messageHistory.scrollHeight;
        }

        function updateMetrics() {
            const metrics = document.querySelectorAll('.metric-value');
            const values = [
                Math.floor(Math.random() * 3) + 4, // Active Units (4-6)
                Math.floor(Math.random() * 100) + 200 + 'ms', // Response time
                '$' + (Math.random() * 2 + 2).toFixed(2), // Budget
                (Math.random() * 2 + 97).toFixed(1) + '%' // Success rate
            ];
            
            metrics.forEach((metric, index) => {
                if (index < 4) {
                    metric.textContent = values[index];
                }
            });
        }

        function simulateCodeStream() {
            const codeOutput = document.getElementById('codeOutput');
            const newLines = [
                '// Intelligence gathered from memory system',
                '// Implementing tactical optimization...',
                '+ const tacticalResponse = await router.execute(mission);',
                '+ console.log(`Mission ${mission.id} completed successfully`);',
                '// Unit coordination protocol activated'
            ];
            
            const randomLine = newLines[Math.floor(Math.random() * newLines.length)];
            const codeLine = document.createElement('div');
            codeLine.className = randomLine.startsWith('+') ? 'code-line new' : 'code-line';
            codeLine.textContent = randomLine;
            
            codeOutput.appendChild(codeLine);
            codeOutput.scrollTop = codeOutput.scrollHeight;
            
            // Keep only last 20 lines
            while (codeOutput.children.length > 20) {
                codeOutput.removeChild(codeOutput.firstChild);
            }
        }
    </script>
</body>
</html>
